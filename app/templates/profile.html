{% extends "base.html" %} {% import 'bootstrap/wtf.html' as wtf %} {% block content %}


<main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4">
    <div class="mt-4">
    {% if error2 == True %}
    <span style="color: red;">
        <p> There was an error with your input. This usually occurs if you try to access data that does not exist, 
            or does not belong to you. If error persists, contacts administrators. </p>
    </span> {% endif %}
    <br> {% for error in Analyse.stored1.errors %}
    <span style="color: red;">Selected post either does not belong to you or does not exist.</span> {% endfor %}
    <br> {% for error in Analyse.stored2.errors %}
    <span style="color: red;">Selected post either does not belong to you or does not exist.</span> {% endfor %}
</div>
    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h1 class="h2">Stored Results</h1>
        <div class="btn-toolbar mb-2 mb-md-0">
        </div>
    </div>
    <style>
        table,
        th,
        td {
            border: 1px solid black;
            border-collapse: collapse;
            padding: 0px 10px;
        }
    </style>
    <table class="table table table-striped">
        <tr class="bg-primary text-white">
            <th scope="col">Result ID</th>
            <th scope="col">Title</th>
            <th scope="col">Class</th>
            <th scope="col">Timeframe</th>
            <th scope="col">Interest Rate</th>
        </tr>


        {% for exp in expected %} {% if current_user.id == exp.user_id %}

        <div class="table-responsive">

            <tr>
                <td>{{ exp.id }}</td>
                <td>{{ exp.nickname}} </td>
                <td>{{ exp.intclass }}</td>
                <td>{{ exp.timeframe }}</td>
                <td>{{ exp.interest }}</td>

            </tr>

        </div>

        {% endif %} {% endfor %}
    </table>

    <form action="" method="post" novalidate>
        {{ form.hidden_tag() }} {{ wtf.form_field(form.rid, class='form-control') }}
        <input type="submit" name='btn' value="Remove" class="btn btn-primary"> {% for error in form.rid.errors %}
        <span style="color: red;">Selected post either does not belong to you or does not exist. </span> {% endfor %}


    </form>

    <form action="" method="post" novalidate class="mt-4">
        {{ View.hidden_tag() }} {{ wtf.form_field(View.storedid, class='form-control') }}
        <input type="submit" name='btn' value="View" class="btn btn-primary"> {% for error in View.storedid.errors %}
        <span style="color: red;">Selected post either does not belong to you or does not exist.</span> {% endfor %}
    </form>





    <canvas class="my-4 w-100" id="my   " width="900" height="380"></canvas> {% if error == False %}
    <button type="button" class="btn btn-primary mb-2" id="YearButton2">View Year Table</button>
    <button type="button" class="btn btn-primary mb-2" id="MonthButton2">View Month Table</button>
    <div class="table-responsive" id="yeartable2">
        <table class="table table table-striped ">
            <thead>
                <tr class="bg-primary text-white">
                    <th>Year</th>
                    {% for year in range(timeframe|int +1) %} {% if (year * 12 ) in calc[0].keys() %}
                    <th>{{ years + year }} </th>
                    {% endif %} {% endfor %}

                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Opening Balance</td>
                    {% for year in range(decMonth,timeframe|int * 12 + 1, 12) %}
                    <th>{{ "${:,.2f}".format(calc[0][year]) }} </th>
                    {% endfor %}
                </tr>
                <tr>
                    <td>Interest Returns </td>
                    {% for year in range(decMonth,timeframe|int * 12 + 1, 12) %} {% if year in calc[2].keys() %}
                    <th>{{ "${:,.2f}".format(calc[2][year]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                <!---->
                {% if intclass.lower() == 'e' or intclass.lower() == 'f' or intclass.lower() == 'g' %}
                <tr>
                    <td>Donations</td>
                    {% for year in range(decMonth,timeframe|int * 12 + 1, 12) %} {% if year in calc[3].keys() %}
                    <th>{{ "${:,.2f}".format(calc[3][year]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                <tr>
                    <td>Recapitalization</td>
                    {% for year in range(decMonth,timeframe|int * 12 + 1, 12) %} {% if year in calc[4].keys() %}
                    <th>{{ "${:,.2f}".format(calc[4][year]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                <tr>
                    <td>Capital Distribution</td>
                    {% for year in range(decMonth,timeframe|int * 12 + 1, 12) %} {% if year in calc[5].keys() %}
                    <th>{{ "${:,.2f}".format(calc[5][year]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                {% elif intclass.lower() == 'a' %}
                <tr>
                    <td>Capital Distribution</td>
                    {% for year in range(decMonth,timeframe|int * 12 + 1, 12) %} {% if year in calc[3].keys() %}
                    <th>{{ "${:,.2f}".format(calc[3][year]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                <tr>
                    <td>Spending</td>
                    {% for year in range(decMonth,timeframe|int * 12 + 1, 12) %} {% if year in calc[4].keys() %}
                    <th>{{ "${:,.2f}".format(calc[4][year]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                <tr>
                    <td>Recapitalization</td>
                    {% for year in range(decMonth,timeframe|int * 12 + 1, 12) %} {% if year in calc[5].keys() %}
                    <th>{{ "${:,.2f}".format(calc[5][year]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                {% else %}
                <tr>
                    <td>Additonal Capital Contribution</td>
                    {% for year in range(decMonth,timeframe|int * 12 + 1, 12) %} {% if year in calc[3].keys() %}
                    <th>{{ "${:,.2f}".format(calc[3][year]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                <tr>
                    <td>Spending</td>
                    {% for year in range(decMonth,timeframe|int * 12 + 1, 12) %} {% if year in calc[4].keys() %}
                    <th>{{ "${:,.2f}".format(calc[4][year]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                {% endif %}

                <tr>
                    <td>Closing Balance</td>
                    {% for year in range(decMonth,timeframe|int * 12 + 1, 12) %}
                    <th>{{ "${:,.2f}".format(calc[1][year]) }} </th>
                    {% endfor %}
                </tr>

            </tbody>
        </table>
    </div>
    {% endif %}
    <br> {% if error == False %}
    <div class="table-responsive" id="monthtable2">
        <table class="table table table-striped ">
            <thead>
                <tr class="bg-primary text-white">
                    <th>Month</th>
                    {% for month in range((timeframe|int *12) + 1) %} {% if (month) in calc[0].keys() %} {% set monthDict = {0 : "Jan", 1 : "Feb", 2 : "Mar", 3 : "Apr", 4 : "May", 5 : "Jun", 6 : "Jul", 7 : "Aug", 8 : "Sep", 9 : "Oct", 10 : "Nov", 11 : "Dec"} %}
                    <th>{{ monthDict[(months + month -1) % 12 ] }} {{ years + month//12}} </th>
                    {% endif %} {% endfor %}

                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Opening Balance</td>
                    {% for month in range((timeframe|int * 12) + 1) %}
                    <th>{{ "${:,.2f}".format(calc[0][month]) }} </th>
                    {% endfor %}
                </tr>
                <tr>
                    <td>Interest Returns </td>
                    {% for month in range((timeframe|int * 12) + 1) %} {% if month in calc[2].keys() %}
                    <th>{{ "${:,.2f}".format(calc[2][month]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                <!---->
                {% if intclass.lower() == 'e' or intclass.lower() == 'f' or intclass.lower() == 'g' %}
                <tr>
                    <td>Donations</td>
                    {% for month in range((timeframe|int * 12) + 1) %} {% if month in calc[3].keys() %}
                    <th>{{ "${:,.2f}".format(calc[3][month]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                <tr>
                    <td>Recapitalization</td>
                    {% for month in range((timeframe|int * 12) + 1) %} {% if month in calc[4].keys() %}
                    <th>{{ "${:,.2f}".format(calc[4][month]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                <tr>
                    <td>Capital Distribution</td>
                    {% for month in range((timeframe|int * 12) + 1) %} {% if month in calc[5].keys() %}
                    <th>{{ "${:,.2f}".format(calc[5][month]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                {% elif intclass.lower() == 'a' %}
                <tr>
                    <td>Capital Distribution</td>
                    {% for month in range((timeframe|int * 12) + 1) %} {% if month in calc[3].keys() %}
                    <th>{{ "${:,.2f}".format(calc[3][month]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                <tr>
                    <td>Spending</td>
                    {% for month in range((timeframe|int * 12) + 1) %} {% if month in calc[4].keys() %}
                    <th>{{ "${:,.2f}".format(calc[4][month]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                <tr>
                    <td>Recapitalization</td>
                    {% for month in range((timeframe|int * 12) + 1) %} {% if month in calc[5].keys() %}
                    <th>{{ "${:,.2f}".format(calc[5][month]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                {% else %}
                <tr>
                    <td>Additonal Capital Contribution</td>
                    {% for month in range((timeframe|int * 12) + 1) %} {% if year in calc[3].keys() %}
                    <th>{{ "${:,.2f}".format(calc[3][month]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                <tr>
                    <td>Spending</td>
                    {% for month in range((timeframe|int * 12) + 1) %} {% if month in calc[4].keys() %}
                    <th>{{ "${:,.2f}".format(calc[4][month]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                {% endif %}

                <tr>
                    <td>Closing Balance</td>
                    {% for month in range((timeframe|int * 12) + 1) %}
                    <th>{{ "${:,.2f}".format(calc[1][month]) }} </th>
                    {% endfor %}
                </tr>

            </tbody>
        </table>
    </div>
    {% endif %}



    <br>
    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h1 class="h2">What If Analysis</h1>
        <div class="btn-toolbar mb-2 mb-md-0">
        </div>
    </div>

    <form action="" method="post" novalidate>
        {{ Analyse.hidden_tag() }}
        <p>
            {{ wtf.form_field(Analyse.stored1, class='form-control') }} {{ wtf.form_field(Analyse.stored2, class='form-control') }}
            <input type="submit" name='btn' value="Analyse" class="btn btn-primary">
        </p>
    </form>

    </form>
    <!-- scenario 1 -->
    
    <canvas class="my-4 w-100" id="myChart2" width="900" height="380"></canvas> {% if error == 'False3' %}
    <button type="button" class="btn btn-primary mb-2" id="YearButton3">View Year Tables</button>
    <button type="button" class="btn btn-primary mb-2" id="MonthButton3">View Month Tables</button>
    <h1>Scenario 1- {{title1}}</h1>
    <div class="table-responsive" id="yeartable3">
        <table class="table table table-striped ">
            <thead>
                <tr class="bg-primary text-white">
                    <th>Year</th>
                    {% for year in range(timeframe1|int +1) %} {% if (year * 12 ) in calc3[0].keys() %}
                    <th>{{ years1 + year }} </th>
                    {% endif %} {% endfor %}

                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Opening Balance</td>
                    {% for year in range(decMonth1,timeframe1|int * 12 + 1, 12) %}
                    <th>{{ "${:,.2f}".format(calc3[0][year]) }} </th>
                    {% endfor %}
                </tr>
                <tr>
                    <td>Interest Returns </td>
                    {% for year in range(decMonth1,timeframe1|int * 12 + 1, 12) %} {% if year in calc3[2].keys() %}
                    <th>{{ "${:,.2f}".format(calc3[2][year]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                <!---->
                {% if intclass1.lower() == 'e' or intclass1.lower() == 'f' or intclass1.lower() == 'g' %}
                <tr>
                    <td>Donations</td>
                    {% for year in range(decMonth1,timeframe1|int * 12 + 1, 12) %} {% if year in calc3[3].keys() %}
                    <th>{{ "${:,.2f}".format(calc3[3][year]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                <tr>
                    <td>Recapitalization</td>
                    {% for year in range(decMonth1,timeframe1|int * 12 + 1, 12) %} {% if year in calc3[4].keys() %}
                    <th>{{ "${:,.2f}".format(calc3[4][year]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                <tr>
                    <td>Capital Distribution</td>
                    {% for year in range(decMonth1,timeframe1|int * 12 + 1, 12) %} {% if year in calc3[5].keys() %}
                    <th>{{ "${:,.2f}".format(calc3[5][year]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                {% elif intclass1.lower() == 'a' %}
                <tr>
                    <td>Capital Distribution</td>
                    {% for year in range(decMonth1,timeframe1|int * 12 + 1, 12) %} {% if year in calc3[3].keys() %}
                    <th>{{ "${:,.2f}".format(calc3[3][year]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                <tr>
                    <td>Spending</td>
                    {% for year in range(decMonth1,timeframe1|int * 12 + 1, 12) %} {% if year in calc3[4].keys() %}
                    <th>{{ "${:,.2f}".format(calc3[4][year]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                <tr>
                    <td>Recapitalization</td>
                    {% for year in range(decMonth1,timeframe1|int * 12 + 1, 12) %} {% if year in calc3[5].keys() %}
                    <th>{{ "${:,.2f}".format(calc3[5][year]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                {% else %}
                <tr>
                    <td>Additonal Capital Contribution</td>
                    {% for year in range(decMonth1,timeframe1|int * 12 + 1, 12) %} {% if year in calc3[3].keys() %}
                    <th>{{ "${:,.2f}".format(calc3[3][year]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                <tr>
                    <td>Spending</td>
                    {% for year in range(decMonth1,timeframe1|int * 12 + 1, 12) %} {% if year in calc3[4].keys() %}
                    <th>{{ "${:,.2f}".format(calc3[4][year]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                {% endif %}

                <tr>
                    <td>Closing Balance</td>
                    {% for year in range(decMonth1,timeframe1|int * 12 + 1, 12) %}
                    <th>{{ "${:,.2f}".format(calc3[1][year]) }} </th>
                    {% endfor %}
                </tr>

            </tbody>
        </table>
    </div>
    {% endif %}
    <br> {% if error == 'False3' %}
    <div class="table-responsive" id="monthtable3">
        <table class="table table table-striped ">
            <thead>
                <tr class="bg-primary text-white">
                    <th>Month</th>
                    {% for month in range((timeframe1|int *12) + 1) %} {% if (month) in calc3[0].keys() %} {% set monthDict = {0 : "Jan", 1 : "Feb", 2 : "Mar", 3 : "Apr", 4 : "May", 5 : "Jun", 6 : "Jul", 7 : "Aug", 8 : "Sep", 9 : "Oct", 10 : "Nov", 11 : "Dec"} %}
                    <th>{{ monthDict[(months1 + month -1) % 12 ] }} {{ years1 + month//12}} </th>
                    {% endif %} {% endfor %}

                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Opening Balance</td>
                    {% for month in range((timeframe1|int * 12) + 1) %}
                    <th>{{ "${:,.2f}".format(calc3[0][month]) }} </th>
                    {% endfor %}
                </tr>
                <tr>
                    <td>Interest Returns </td>
                    {% for month in range((timeframe1|int * 12) + 1) %} {% if month in calc3[2].keys() %}
                    <th>{{ "${:,.2f}".format(calc3[2][month]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                <!---->
                {% if intclass1.lower() == 'e' or intclass1.lower() == 'f' or intclass1.lower() == 'g' %}
                <tr>
                    <td>Donations</td>
                    {% for month in range((timeframe1|int * 12) + 1) %} {% if month in calc3[3].keys() %}
                    <th>{{ "${:,.2f}".format(calc3[3][month]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                <tr>
                    <td>Recapitalization</td>
                    {% for month in range((timeframe1|int * 12) + 1) %} {% if month in calc3[4].keys() %}
                    <th>{{ "${:,.2f}".format(calc3[4][month]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                <tr>
                    <td>Capital Distribution</td>
                    {% for month in range((timeframe1|int * 12) + 1) %} {% if month in calc3[5].keys() %}
                    <th>{{ "${:,.2f}".format(calc3[5][month]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                {% elif intclass1.lower() == 'a' %}
                <tr>
                    <td>Capital Distribution</td>
                    {% for month in range((timeframe1|int * 12) + 1) %} {% if month in calc3[3].keys() %}
                    <th>{{ "${:,.2f}".format(calc3[3][month]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                <tr>
                    <td>Spending</td>
                    {% for month in range((timeframe1|int * 12) + 1) %} {% if month in calc3[4].keys() %}
                    <th>{{ "${:,.2f}".format(calc3[4][month]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                <tr>
                    <td>Recapitalization</td>
                    {% for month in range((timeframe1|int * 12) + 1) %} {% if month in calc3[5].keys() %}
                    <th>{{ "${:,.2f}".format(calc3[5][month]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                {% else %}
                <tr>
                    <td>Additonal Capital Contribution</td>
                    {% for month in range((timeframe1|int * 12) + 1) %} {% if year in calc3[3].keys() %}
                    <th>{{ "${:,.2f}".format(calc3[3][month]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                <tr>
                    <td>Spending</td>
                    {% for month in range((timeframe1|int * 12) + 1) %} {% if month in calc3[4].keys() %}
                    <th>{{ "${:,.2f}".format(calc3[4][month]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                {% endif %}

                <tr>
                    <td>Closing Balance</td>
                    {% for month in range((timeframe1|int * 12) + 1) %}
                    <th>{{ "${:,.2f}".format(calc3[1][month]) }} </th>
                    {% endfor %}
                </tr>

            </tbody>
        </table>
    </div>
    {% endif %}
    <!-- scenario 2 -->
    <h1>Scenario 2 - {{title2}}</h1>
    <br> {% if error == 'False3' %}
    <div class="table-responsive" id="yeartable3">
        <table class="table table table-striped ">
            <thead>
                <tr class="bg-primary text-white">
                    <th>Year</th>
                    {% for year in range(timeframe2|int +1) %} {% if (year * 12 ) in calc4[0].keys() %}
                    <th>{{ years2 + year }} </th>
                    {% endif %} {% endfor %}

                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Opening Balance</td>
                    {% for year in range(decMonth2,timeframe2|int * 12 + 1, 12) %}
                    <th>{{ "${:,.2f}".format(calc4[0][year]) }} </th>
                    {% endfor %}
                </tr>
                <tr>
                    <td>Interest Returns </td>
                    {% for year in range(decMonth2,timeframe2|int * 12 + 1, 12) %} {% if year in calc4[2].keys() %}
                    <th>{{ "${:,.2f}".format(calc4[2][year]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                <!---->
                {% if intclass2.lower() == 'e' or intclass2.lower() == 'f' or intclass2.lower() == 'g' %}
                <tr>
                    <td>Donations</td>
                    {% for year in range(decMonth2,timeframe2|int * 12 + 1, 12) %} {% if year in calc4[3].keys() %}
                    <th>{{ "${:,.2f}".format(calc4[3][year]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                <tr>
                    <td>Recapitalization</td>
                    {% for year in range(decMonth2,timeframe2|int * 12 + 1, 12) %} {% if year in calc4[4].keys() %}
                    <th>{{ "${:,.2f}".format(calc4[4][year]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                <tr>
                    <td>Capital Distribution</td>
                    {% for year in range(decMonth2,timeframe2|int * 12 + 1, 12) %} {% if year in calc4[5].keys() %}
                    <th>{{ "${:,.2f}".format(calc4[5][year]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                {% elif intclass1.lower() == 'a' %}
                <tr>
                    <td>Capital Distribution</td>
                    {% for year in range(decMonth2,timeframe2|int * 12 + 1, 12) %} {% if year in calc4[3].keys() %}
                    <th>{{ "${:,.2f}".format(calc4[3][year]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                <tr>
                    <td>Spending</td>
                    {% for year in range(decMonth2,timeframe2|int * 12 + 1, 12) %} {% if year in calc4[4].keys() %}
                    <th>{{ "${:,.2f}".format(calc4[4][year]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                <tr>
                    <td>Recapitalization</td>
                    {% for year in range(decMonth2,timeframe2|int * 12 + 1, 12) %} {% if year in calc4[5].keys() %}
                    <th>{{ "${:,.2f}".format(calc4[5][year]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                {% else %}
                <tr>
                    <td>Additonal Capital Contribution</td>
                    {% for year in range(decMonth2,timeframe2|int * 12 + 1, 12) %} {% if year in calc4[3].keys() %}
                    <th>{{ "${:,.2f}".format(calc4[3][year]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                <tr>
                    <td>Spending</td>
                    {% for year in range(decMonth2,timeframe2|int * 12 + 1, 12) %} {% if year in calc4[4].keys() %}
                    <th>{{ "${:,.2f}".format(calc4[4][year]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                {% endif %}

                <tr>
                    <td>Closing Balance</td>
                    {% for year in range(decMonth2,timeframe2|int * 12 + 1, 12) %}
                    <th>{{ "${:,.2f}".format(calc4[1][year]) }} </th>
                    {% endfor %}
                </tr>

            </tbody>
        </table>
    </div>
    {% endif %}
    <br> {% if error == 'False3' %}
    <div class="table-responsive" id="monthtable3">
        <table class="table table table-striped ">
            <thead>
                <tr class="bg-primary text-white">
                    <th>Month</th>
                    {% for month in range((timeframe2|int *12) + 1) %} {% if (month) in calc4[0].keys() %} {% set monthDict = {0 : "Jan", 1 : "Feb", 2 : "Mar", 3 : "Apr", 4 : "May", 5 : "Jun", 6 : "Jul", 7 : "Aug", 8 : "Sep", 9 : "Oct", 10 : "Nov", 11 : "Dec"} %}
                    <th>{{ monthDict[(months2 + month -1) % 12 ] }} {{ years2 + month//12}} </th>
                    {% endif %} {% endfor %}

                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Opening Balance</td>
                    {% for month in range((timeframe2|int * 12) + 1) %}
                    <th>{{ "${:,.2f}".format(calc4[0][month]) }} </th>
                    {% endfor %}
                </tr>
                <tr>
                    <td>Interest Returns </td>
                    {% for month in range((timeframe2|int * 12) + 1) %} {% if month in calc4[2].keys() %}
                    <th>{{ "${:,.2f}".format(calc4[2][month]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                <!---->
                {% if intclass2.lower() == 'e' or intclass2.lower() == 'f' or intclass2.lower() == 'g' %}
                <tr>
                    <td>Donations</td>
                    {% for month in range((timeframe2|int * 12) + 1) %} {% if month in calc4[3].keys() %}
                    <th>{{ "${:,.2f}".format(calc4[3][month]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                <tr>
                    <td>Recapitalization</td>
                    {% for month in range((timeframe2|int * 12) + 1) %} {% if month in calc4[4].keys() %}
                    <th>{{ "${:,.2f}".format(calc4[4][month]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                <tr>
                    <td>Capital Distribution</td>
                    {% for month in range((timeframe2|int * 12) + 1) %} {% if month in calc4[5].keys() %}
                    <th>{{ "${:,.2f}".format(calc4[5][month]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                {% elif intclass2.lower() == 'a' %}
                <tr>
                    <td>Capital Distribution</td>
                    {% for month in range((timeframe2|int * 12) + 1) %} {% if month in calc4[3].keys() %}
                    <th>{{ "${:,.2f}".format(calc4[3][month]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                <tr>
                    <td>Spending</td>
                    {% for month in range((timeframe2|int * 12) + 1) %} {% if month in calc4[4].keys() %}
                    <th>{{ "${:,.2f}".format(calc4[4][month]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                <tr>
                    <td>Recapitalization</td>
                    {% for month in range((timeframe2|int * 12) + 1) %} {% if month in calc4[5].keys() %}
                    <th>{{ "${:,.2f}".format(calc4[5][month]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                {% else %}
                <tr>
                    <td>Additonal Capital Contribution</td>
                    {% for month in range((timeframe2|int * 12) + 1) %} {% if year in calc4[3].keys() %}
                    <th>{{ "${:,.2f}".format(calc4[3][month]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                <tr>
                    <td>Spending</td>
                    {% for month in range((timeframe1|int * 12) + 1) %} {% if month in calc3[4].keys() %}
                    <th>{{ "${:,.2f}".format(calc3[4][month]) }} </th>
                    {% else %}
                    <th>$0.00</th>
                    {% endif %} {% endfor %}
                </tr>
                {% endif %}

                <tr>
                    <td>Closing Balance</td>
                    {% for month in range((timeframe2|int * 12) + 1) %}
                    <th>{{ "${:,.2f}".format(calc4[1][month]) }} </th>
                    {% endfor %}
                </tr>

            </tbody>
        </table>
    </div>
    {% endif %}







</main>

<!-- Single graph -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.min.js"></script>
<script>
    var ctx = document.getElementById("myChart");
    var myChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: [
            {% for year in range(timeframe|int +1) %}
                    "{{ years + year }}" ,
                    {% endfor %}
            ],

            datasets: [
            {
                label: 'Scenario 1',
                data: [
                {% for year in range(decMonth,timeframe|int * 12 + 1, 12) %}
                "{{ (calc[1][year]) }}" ,
                    {% endfor %}

                ],
                lineTension: 0,
                backgroundColor: 'transparent',
                borderColor: '#007bff',
                borderWidth: 4,
                pointBackgroundColor: '#007bff'
            }]
        },
        options: {
            scales: {
                yAxes: [{
                    ticks: {
                        beginAtZero: false
                    }
                }]
            },
            legend: {
                display: true,
            }
        }
    });
</script>

<!-- What if Graph -->
<script>
    var ctx = document.getElementById("myChart2");
    var myChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: [
            {% for year in range(timeframemax|int +1) %}
                    "{{ years1 + year }}" ,
                    {% endfor %}
            ],

            datasets: [{
                label: 'Scenario 1',
                data: [
                {% for year in range(decMonth1,timeframe1|int * 12 + 1, 12) %}
                "{{ (calc3[1][year]) }}" ,
                    {% endfor %}
                ],
                lineTension: 0,
                backgroundColor: 'transparent',
                borderColor: '#007bff',
                borderWidth: 4,
                pointBackgroundColor: '#007bff'
            }
            ,
            {
                label: 'Scenario 2',
                data: [
                {% for year in range(decMonth2,timeframe2|int * 12 + 1, 12) %}
                "{{ (calc4[1][year]) }}" ,
                    {% endfor %}
                ],
                lineTension: 0,
                backgroundColor: 'transparent',
                borderColor: '#e2b600',
                borderWidth: 4,
                pointBackgroundColor: '#e2b600'
            }
            ]

        },
        options: {
            scales: {
                yAxes: [{
                    ticks: {
                        beginAtZero: false
                    }
                }]
            },
            legend: {
                display: true,
            }
        }
    });
</script>


{% endblock %}
